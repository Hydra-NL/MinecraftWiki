<div class="page">
  <div class="custom-container">
    <content class="mobs">
      <form
        #mobEditForm="ngForm"
        name="form"
        (ngSubmit)="mobEditForm.form.valid && updateMob()"
      >
        <div class="big-title">
          <h1 class="edit-big-title">
            <i class="fa fa-cube"></i>
            <input
              type="text"
              class="form-control"
              placeholder="Mob Name"
              [(ngModel)]="mob!.name"
              #mobname="ngModel"
              name="mobname"
              [ngClass]="{
                'is-invalid':
                  mobname.invalid && (mobname.dirty || mobname.touched)
              }"
              value="{{ mob?.name }}"
              required
              minlength="3"
              maxlength="30"
            />
          </h1>
          <div *ngIf="mobname.invalid" class="invalid-feedback">
            <div *ngIf="mobname.errors?.['required']">A name is required</div>
            <div *ngIf="mobname.errors?.['minlength']">
              The mob's name should be atleast 3 characters long
            </div>
            <div *ngIf="mobname.errors?.['maxlength']">
              The mob's name should be atmost 30 characters long
            </div>
          </div>

          <a
            class="btn custom-btn back"
            routerLink="/mobs/{{ mob?._id }}"
            title="Back"
          >
            <i class="fa-regular fa-square-caret-left"></i>
            Back
          </a>
        </div>
        <div>
          <div class="edit-textbox">
            <label for="description">Description</label>
            <textarea
              class="form-control"
              id="description"
              rows="5"
              placeholder="Mob Description"
              [(ngModel)]="mob!.description"
              #mobdescription="ngModel"
              name="mobdescription"
              [ngClass]="{
                'is-invalid':
                  mobdescription.invalid &&
                  (mobdescription.dirty || mobdescription.touched)
              }"
              value="{{ mob?.description }}"
              required
              minlength="3"
              maxlength="2000"
            ></textarea>
            <div *ngIf="mobdescription.invalid" class="invalid-feedback">
              <div *ngIf="mobdescription.errors?.['required']">
                A description is required
              </div>
              <div *ngIf="mobdescription.errors?.['minlength']">
                The mob's description should be atleast 3 characters long
              </div>
              <div *ngIf="mobdescription.errors?.['maxlength']">
                The mob's description can atmost be 2000 characters long
              </div>
            </div>
          </div>

          <h5 class="subtitle" id="stats">Stats</h5>
          <div class="edit-field">
            <label for="health">Health: </label>
            <input
              type="number"
              class="form-control"
              id="health"
              [(ngModel)]="mob!.health"
              #mobhealth="ngModel"
              name="mobhealth"
              [ngClass]="{
                'is-invalid':
                  mobhealth.invalid && (mobhealth.dirty || mobhealth.touched)
              }"
              value="{{ mob?.health }}"
              required
              min="1"
              max="200"
            />(1 - 200)
            <div *ngIf="mobhealth.invalid" class="invalid-feedback">
              <div *ngIf="mobhealth.errors?.['required']">
                Health is required
              </div>
              <div *ngIf="mobhealth.errors?.['min']">
                The mob's health should be atleast 1
              </div>
              <div *ngIf="mobhealth.errors?.['max']">
                The mob's health can be 200 at most
              </div>
            </div>
          </div>
          <div class="edit-field">
            <label for="attack">Attack: </label>
            <input
              type="number"
              class="form-control"
              id="attack"
              [(ngModel)]="mob!.attack"
              #mobattack="ngModel"
              name="mobattack"
              [ngClass]="{
                'is-invalid':
                  mobattack.invalid && (mobattack.dirty || mobattack.touched)
              }"
              value="{{ mob?.attack }}"
              required
              min="0"
              max="50"
            />(0 - 50)
            <div *ngIf="mobattack.invalid" class="invalid-feedback">
              <div *ngIf="mobattack.errors?.['required']">
                Attack is required
              </div>
              <div *ngIf="mobattack.errors?.['min']">
                The mob's attack should be atleast 0
              </div>
              <div *ngIf="mobattack.errors?.['max']">
                The mob's attack should be atmost 50
              </div>
            </div>
          </div>
          <div class="edit-field">
            <label for="armor">Armor: </label>
            <input
              type="number"
              class="form-control"
              id="armor"
              [(ngModel)]="mob!.armor"
              #mobarmor="ngModel"
              name="mobarmor"
              [ngClass]="{
                'is-invalid':
                  mobarmor.invalid && (mobarmor.dirty || mobarmor.touched)
              }"
              value="{{ mob?.armor }}"
              required
              min="0"
              max="20"
            />(0 - 20)
            <div *ngIf="mobarmor.invalid" class="invalid-feedback">
              <div *ngIf="mobarmor.errors?.['required']">Armor is required</div>
              <div *ngIf="mobarmor.errors?.['min']">
                The mob's armor should be atleast 0
              </div>
              <div *ngIf="mobarmor.errors?.['max']">
                The mob's armor should be atmost 20
              </div>
            </div>
          </div>

          <h5 class="subtitle" id="behavior">Behavior</h5>
          <div class="edit-field">
            <label for="passive">Passive: </label>
            <input
              type="checkbox"
              id="passive"
              [(ngModel)]="mob!.isPassive"
              #mobpassive="ngModel"
              name="mobpassive"
              (change)="(true)"
              #checkBox
              [checked]="mob?.isPassive"
            />
          </div>
          <h5 class="subtitle" id="biome">Biome</h5>
          <div class="edit-field">
            <label for="biome">Biome name: </label>
            <input
              type="text"
              class="form-control"
              id="biome"
              placeholder="Biome name"
              [(ngModel)]="mob!.biome.name"
              #mobbiome="ngModel"
              name="biome"
              [ngClass]="{
                'is-invalid':
                  mobbiome.invalid && (mobbiome.dirty || mobbiome.touched)
              }"
              required
              value="{{ mob!.biome.name }}"
            />
            <div *ngIf="mobbiome.invalid" class="invalid-feedback">
              <div *ngIf="mobbiome.errors?.['required']">
                A biome name is required
              </div>
            </div>
          </div>
          <div class="edit-textbox">
            <label for="biome">Description </label>
            <textarea
              class="form-control"
              id="biome"
              rows="4"
              placeholder="Biome Description"
              [(ngModel)]="mob!.biome.description"
              #mobbiomedescription="ngModel"
              name="biomeDescription"
              [ngClass]="{
                'is-invalid':
                  mobbiomedescription.invalid &&
                  (mobbiomedescription.dirty || mobbiomedescription.touched)
              }"
              required
              minlength="3"
              value="{{ mob!.biome.description }}"
            ></textarea>
            <div *ngIf="mobbiomedescription.invalid" class="invalid-feedback">
              <div *ngIf="mobbiomedescription.errors?.['required']">
                A description is required
              </div>
              <div *ngIf="mobbiomedescription.errors?.['minlength']">
                The biome's description should be atleast 3 characters long
              </div>
            </div>
          </div>
          <div class="edit-field">
            <label for="biome">Temperature: </label>
            <input
              type="number"
              class="form-control"
              id="biome"
              placeholder="Temperature"
              [(ngModel)]="mob!.biome.temperature"
              #mobbiometemperature="ngModel"
              name="biomeTemperature"
              [ngClass]="{
                'is-invalid':
                  mobbiometemperature.invalid &&
                  (mobbiometemperature.dirty || mobbiometemperature.touched)
              }"
              required
              min="-20"
              max="50"
              value="{{ mob!.biome.temperature }}"
            />
            (°C) (-20°C - 50°C)
            <div *ngIf="mobbiometemperature.invalid" class="invalid-feedback">
              <div *ngIf="mobbiometemperature.errors?.['required']">
                A temperature is required
              </div>
              <div *ngIf="mobbiometemperature.errors?.['min']">
                The biome's temperature should be atleast -20°C
              </div>
              <div *ngIf="mobbiometemperature.errors?.['max']">
                The biome's temperature should be atmost 50°C
              </div>
            </div>
          </div>
          <div class="edit-field">
            <label for="biome">Dimension: </label>
            <select
              class="form-control edit-select"
              value="{{ mob!.biome.dimension }}"
              id="biome"
              required
              [(ngModel)]="mob!.biome.dimension"
              #mobbiomedimension="ngModel"
              name="biomeDimension"
              [ngClass]="{
                'is-invalid':
                  mobbiomedimension.invalid &&
                  (mobbiomedimension.dirty || mobbiomedimension.touched)
              }"
              required
            >
              <option value="Overworld">Overworld</option>
              <option value="Nether">Nether</option>
              <option value="End">End</option>
            </select>
            <div *ngIf="mobbiomedimension.invalid" class="invalid-feedback">
              <div *ngIf="mobbiomedimension.errors?.['required']">
                A dimension is required
              </div>
            </div>
          </div>
        </div>

        <button
          type="button"
          (click)="updateMob()"
          class="btn custom-btn edit-button"
          [disabled]="!mobEditForm.valid"
        >
          <i class="fa-solid fa-check"></i>
          Save
        </button>
      </form>
    </content>
  </div>
</div>
